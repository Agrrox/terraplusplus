/*
 * DEFAULT TERRA++ OpenStreetMap DATA INTERPRETATION CONFIG
 *
 * @author DaPorkchop_
 */

{
    "line": [
        //tunnels shouldn't be generated, ever
        {
            "match": {
                "tag": {
                    "tunnel": "yes"
                }
            },
            //emit nothing
            "emit": null
        },
        //functionally equivalent to old FREEWAY/LIMITEDACCESS behavior
        {
            "match": {
                "tag": {
                    "highway": [
                        //matches tags with either value
                        "motorway",
                        "trunk"
                    ]
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "+": {
                                "/": {
                                    "*": {
                                        "tag": {
                                            "key": "lanes",
                                            "fallback": 2
                                        },
                                        "value": 3
                                    },
                                    "value": 2
                                },
                                "value": 2
                            }
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old INTERCHANGE behavior
        {
            "match": {
                "tag": {
                    "highway": [
                        //matches tags with either value
                        "motorway_link",
                        "trunk_link"
                    ]
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "/": {
                                "*": {
                                    "max": {
                                        "tag": {
                                            "key": "lanes",
                                            "fallback": 2
                                        },
                                        "value": 2
                                    },
                                    "value": 3
                                },
                                "value": 2
                            }
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old MAIN behavior
        {
            "match": {
                "tag": {
                    "highway": [
                        //matches tags with either value
                        "primary",
                        "raceway"
                    ]
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "*": {
                                "tag": {
                                    "key": "lanes",
                                    "fallback": 2
                                },
                                "value": 2
                            }
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old MINOR behavior
        {
            "match": {
                "tag": {
                    "highway": [
                        //matches tags with either value
                        "tertiary",
                        "residential"
                    ]
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "tag": {
                                "key": "lanes",
                                "fallback": 2
                            }
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old SIDE behavior
        {
            "match": {
                "tag": {
                    "highway": [
                        //matches tags with either value
                        "secondary",
                        "primary_link",
                        "secondary_link",
                        "living_street",
                        "bus_guideway",
                        "service",
                        "unclassified"
                    ]
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "/": {
                                "+": {
                                    "*": {
                                        "tag": {
                                            "key": "lanes",
                                            "fallback": 2
                                        },
                                        "value": 3
                                    },
                                    "value": 1
                                },
                                "value": 2
                            }
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old ROAD behavior
        {
            "match": {
                "tag": {
                    //matches anything tagged as "highway" that didn't match any previous filters
                    "highway": null
                }
            },
            "emit": {
                "line": {
                    "wide": {
                        "block": {
                            "id": "minecraft:concrete",
                            "properties": {
                                "color": "grey"
                            }
                        },
                        "width": {
                            "value": 1
                        },
                        "crossWater": true
                    }
                }
            }
        },
        //functionally equivalent to old BUILDING behavior
        {
            "match": {
                "tag": {
                    //matches anything tagged as "building"
                    "building": null
                }
            },
            "emit": {
                "line": {
                    "narrow": {
                        "block": {
                            "id": "minecraft:brick"
                        },
                        "crossWater": false
                    }
                }
            }
        },
        //functionally equivalent to old STREAM behavior
        {
            "match": {
                "tag": {
                    "natural": "stream"
                }
            },
            "emit": {
                "line": {
                    "narrow": {
                        "block": {
                            "id": "minecraft:water"
                        },
                        "crossWater": false
                    }
                }
            }
        },
        //functionally equivalent to old RIVER behavior
        {
            "match": {
                "tag": {
                    "natural": [
                        "river",
                        "canal"
                    ]
                }
            },
            "emit": {
                "line": {
                    "block": {
                        "id": "minecraft:water"
                    },
                    "style": {
                        "wide": {
                            "width": {
                                "value": 5
                            },
                            "crossWater": false
                        }
                    }
                }
            }
        }
    ],
    "polygon": [
        //functionally equivalent to old BUILDING behavior
        {
            "match": {
                "tag": {
                    //matches anything tagged as "building"
                    "building": null
                }
            },
            "emit": {
                "line": {
                    "narrow": {
                        "block": {
                            "id": "minecraft:brick"
                        },
                        "crossWater": false
                    }
                }
            }
        },
        {
            "match": {
                "or": {
                    "tag": {
                        //matches anything tagged as "water"
                        "water": null
                    },
                    "tag": {
                        //matches anything tagged as "natural=water"
                        "natural": "water"
                    },
                    "tag": {
                        //matches anything tagged as "waterway=riverbank"
                        "waterway": "riverbank"
                    }
                }
            },
            "emit": {
                "area": {
                    "distance": {
                        "target": "water_depth"
                    }
                }
            }
        },
        {
            "match": {
                "tag": {
                    //matches anything tagged as "natural=coastline"
                    "natural": "coastline"
                }
            },
            "emit": {
                "area": {
                    "shape": {
                        "target": "ocean"
                    }
                }
            }
        }
    ]
}
